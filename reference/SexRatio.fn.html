<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Assign sex to unsexed fish based on fish with similar traits — SexRatio.fn • nwfscSurvey</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Assign sex to unsexed fish based on fish with similar traits — SexRatio.fn"><meta name="description" content="Assign sex to unsexed fish based on fish with similar traits"><meta property="og:description" content="Assign sex to unsexed fish based on fish with similar traits"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">nwfscSurvey</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/nwfscSurvey.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Assign sex to unsexed fish based on fish with similar traits</h1>

      <div class="d-none name"><code>SexRatio.fn.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Assign sex to unsexed fish based on fish with similar traits</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">SexRatio.fn</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  <span class="va">sexRatioStage</span>,</span>
<span>  <span class="va">sexRatioUnsexed</span>,</span>
<span>  <span class="va">maxSizeUnsexed</span>,</span>
<span>  bins <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>A data frame or a nested list depending on <code>sexRatioStage</code>
which will dictate where this function is called inside code that
expands the data such as <code><a href="SurveyLFs.fn.html">SurveyLFs.fn()</a></code> or <code><a href="SurveyAFs.fn.html">SurveyAFs.fn()</a></code>.</p></dd>


<dt id="arg-sexratiostage">sexRatioStage<a class="anchor" aria-label="anchor" href="#arg-sexratiostage"></a></dt>
<dd><p>An integer specifying the stage of the expansion in
which the sex ratio should be applied. There is no default value and only
values of <code>1L`` or </code>2L` are appropriate.</p></dd>


<dt id="arg-sexratiounsexed">sexRatioUnsexed<a class="anchor" aria-label="anchor" href="#arg-sexratiounsexed"></a></dt>
<dd><p>A numerical value within <code>[0.0, 1.0]</code> that will be
used as the sex ratio for measured individuals less than <code>maxSizeUnsexed</code>.
If <code>NA_real_</code>, then the sex ratio for stage-1 expansion will not be
conducted.</p></dd>


<dt id="arg-maxsizeunsexed">maxSizeUnsexed<a class="anchor" aria-label="anchor" href="#arg-maxsizeunsexed"></a></dt>
<dd><p>A numerical value specifying the right side of the
following bin <code>[0, maxSizeUnsexed]</code>, where all fish measured in this bin
are assigned a sex based on sexRatioUnsexed.
Fish with a measurement larger than this value will be assigned a sex
based on the calculated sex ratio in the data.</p></dd>


<dt id="arg-bins">bins<a class="anchor" aria-label="anchor" href="#arg-bins"></a></dt>
<dd><p>A vector of measurement bins that were used to bin the
measurement of interest. Passing the bins as an argument ensures that
appropriate "like" fish are found, i.e., if a bin is missing from the data
because no fish were measured that fell in that bin the code will be aware
the bin is missing.
TODO: This argument could be avoided if the bins were factors where all
of the levels are documented.</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>A logical that specifies if you want to print messages and
warnings to the console. The default is <code>TRUE</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Assign sex to fish that were sampled but not sexed based on the proportion
of like fish that were female out of sexed fish. After assigning unsexed
fish to males and females, new sample sizes of each sex are calculated and
the expansion factors are augmented.
The definition of what classifies as "like fish" depends on the
stage of the expansion, see the Details section.</p>
<p>The sex ratio is calculated as the number of females divided
by the sum of the number of females and males. So, the value being
reported is actually the proportion of females.</p>
<p><code>SexRatio.fn()</code> has different behavior depending on the expansion
being performed, which is controlled using the <code>sexRatioStage</code> argument.</p>
<p>The expansion factors in the returned data frame are unaltered for unsexed
fish.
TODO: Decide if the previous method is intended or if the expansion factors
should be changed for unsexed fish too but to zero? Also, the stage-2
expansion does alter the number of unsexed fish but the stage-1 does
not.
TODO: Think about how the function alters the expansion
sample sizes and did not just report a sex ratio for each stage
that could be used in the expansion functions themselves.
TODO: Change the message for stage-2 expansion to better reflect what the
code is doing
TODO: align the stage-1 and stage-2 expansion details so they are written in
a similar fashion.</p><ul><li><p>Stage-1 expansion:</p><ul><li><p>Sex ratio from observations within a tow/measurement bin combination
is applied to all unsexed fish within that same tow/measurement bin;</p></li>
<li><p>Sex ratio from observations within a measurement bin across all years
is applied to all unsexed fish within that same measurement bin that
did not have any sex ratio information available at the tow level;</p></li>
<li><p>Sex ratio from nearby measurement bins across all years is applied
to all unsexed fish within a measurement bin with zero sexed fish.
Here, nearby bins are classified as those that are one measurement unit
smaller and larger than the current bin.</p></li>
</ul></li>
<li><p>Stage-2 expansion:</p><ul><li><p>Sex ratio of sexed fish is within a measurement bin is calculated for
every strata/year combination;</p></li>
<li><p>Missing sex ratios for a measurement bin are filled in based on the sex
ratio of all measured fish within that bin across all years and strata;</p></li>
<li><p>Still missing sex ratios for a measurement bin are based on the sex ratio
of sexed fish for near (i.e., plus or minus one) measurement bins away
across all years and strata.</p></li>
</ul></li>
</ul></div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Allan C. Hicks and Chantel R. Wetzel</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Chantel R. Wetzel, Kelli F. Johnson, Allan C. Hicks.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

